package com.dihuo.twodfire.retail.activity.setting;

import java.util.ArrayList;
import java.util.List;

import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;

import com.dihuo.twodfire.retail.R;
import com.dihuo.twodfire.retail.activity.TitleActivity;
import com.dihuo.twofire.retail.adapter.ChoiceAdapter;
import com.dihuo.twofire.retail.adapter.RolePermissionSubItem;


public class BusinessSettingActivity extends TitleActivity
    implements OnItemClickListener, OnClickListener {
    
    private List<RolePermissionSubItem> mData;
    private ChoiceAdapter mAdapter;
    
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.setting_business);
        setTitle(R.string.setting_business);
        
        String[] str = getResources().getStringArray(R.array.business_type);
        mData = new ArrayList<RolePermissionSubItem>();
        for (int i = 0; i < str.length; i++) {
            mData.add(new RolePermissionSubItem(i, str[i]));
        }
        
        findViewById(R.id.help).setOnClickListener(this);
        
        ListView list = (ListView) findViewById(R.id.setting_list);
        mAdapter = new ChoiceAdapter(this, mData, R.layout.setting_business_item);
        list.setAdapter(mAdapter);
        list.setOnItemClickListener(this);
    }

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {
        if (!mData.get(position).mChecked) {
            initChecked();
            mData.get(position).mChecked = true;
        }
        
        mAdapter.notifyDataSetChanged();
    }

    private void initChecked() {
        for (int i = 0; i < mData.size(); i++) {
            mData.get(i).mChecked = false;
        }
    }
    
    @Override
    public void onClick(View v) {
        Intent intent = new Intent();
        switch (v.getId()) {
        case R.id.setting_payway_help:
            intent.setClass(this, SettingHelpActivity.class);
            startActivity(intent);
            break;
        }
    }
}
